{
  "name": "Task Spawning",
  "description": "Agent spawns subtasks to handle a complex request",
  "initial_task": {
    "description": "Analyze all Rust files in the src directory and create a summary report"
  },
  "mock_responses": [
    {
      "step": 1,
      "trigger": "task_start",
      "response": {
        "text": "I'll break this down into subtasks:\n1. List all Rust files\n2. Analyze each file\n3. Create summary report",
        "subtasks": [
          {
            "description": "List all Rust files in src directory",
            "priority": "high"
          },
          {
            "description": "Analyze Rust files for complexity and structure",
            "priority": "medium"
          },
          {
            "description": "Generate summary report from analysis",
            "priority": "low"
          }
        ]
      }
    },
    {
      "step": 2,
      "trigger": "subtask_start",
      "subtask_index": 0,
      "response": {
        "text": "Listing Rust files in the src directory.",
        "tool_calls": [
          {
            "tool": "list_files",
            "args": {
              "path": "src",
              "pattern": "**/*.rs"
            }
          }
        ]
      }
    },
    {
      "step": 3,
      "trigger": "tool_result",
      "tool": "list_files",
      "response": {
        "text": "Found 5 Rust files:\n- src/main.rs\n- src/lib.rs\n- src/utils.rs\n- src/config.rs\n- src/tests.rs",
        "tool_calls": []
      }
    },
    {
      "step": 4,
      "trigger": "subtask_start",
      "subtask_index": 1,
      "response": {
        "text": "Analyzing the structure and complexity of each file.",
        "tool_calls": [
          {
            "tool": "read_file",
            "args": {"path": "src/main.rs"}
          }
        ]
      }
    },
    {
      "step": 5,
      "trigger": "tool_result",
      "tool": "read_file",
      "response": {
        "text": "Analysis complete. Main.rs has 150 lines with moderate complexity.",
        "tool_calls": []
      }
    },
    {
      "step": 6,
      "trigger": "subtask_start",
      "subtask_index": 2,
      "response": {
        "text": "Creating summary report based on analysis.",
        "tool_calls": [
          {
            "tool": "write_file",
            "args": {
              "path": "analysis_report.md",
              "content": "# Code Analysis Report\n\n## Summary\n- Total files: 5\n- Total lines: ~500\n- Complexity: Moderate\n"
            }
          }
        ]
      }
    },
    {
      "step": 7,
      "trigger": "tool_result",
      "tool": "write_file",
      "response": {
        "text": "Summary report has been created at analysis_report.md",
        "tool_calls": []
      }
    }
  ],
  "expected_ui_states": [
    {
      "after_step": 1,
      "task_tree": [
        {
          "id": "task_1",
          "description": "Analyze all Rust files in the src directory and create a summary report",
          "status": "running",
          "children": [
            {
              "id": "task_1_1",
              "description": "List all Rust files in src directory",
              "status": "pending"
            },
            {
              "id": "task_1_2",
              "description": "Analyze Rust files for complexity and structure",
              "status": "pending"
            },
            {
              "id": "task_1_3",
              "description": "Generate summary report from analysis",
              "status": "pending"
            }
          ]
        }
      ]
    },
    {
      "after_step": 3,
      "task_tree": [
        {
          "id": "task_1",
          "description": "Analyze all Rust files in the src directory and create a summary report",
          "status": "running",
          "children": [
            {
              "id": "task_1_1",
              "description": "List all Rust files in src directory",
              "status": "completed"
            },
            {
              "id": "task_1_2",
              "description": "Analyze Rust files for complexity and structure",
              "status": "running"
            },
            {
              "id": "task_1_3",
              "description": "Generate summary report from analysis",
              "status": "pending"
            }
          ]
        }
      ]
    },
    {
      "after_step": 7,
      "task_tree": [
        {
          "id": "task_1",
          "description": "Analyze all Rust files in the src directory and create a summary report",
          "status": "completed",
          "children": [
            {
              "id": "task_1_1",
              "description": "List all Rust files in src directory",
              "status": "completed"
            },
            {
              "id": "task_1_2",
              "description": "Analyze Rust files for complexity and structure",
              "status": "completed"
            },
            {
              "id": "task_1_3",
              "description": "Generate summary report from analysis",
              "status": "completed"
            }
          ]
        }
      ]
    }
  ]
}
