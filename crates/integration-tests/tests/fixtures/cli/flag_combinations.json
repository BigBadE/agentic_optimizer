{
  "name": "CLI Flag Combinations and Error Handling",
  "description": "Tests CLI flags: --local, --validation, --project, and their combinations with error cases",
  "tags": [
    "cli",
    "flags",
    "validation",
    "error-handling"
  ],
  "setup": {
    "files": {},
    "terminal_size": [
      80,
      24
    ]
  },
  "events": [
    {
      "type": "setup_project",
      "data": {
        "name": "local_test_project",
        "files": {
          "Cargo.toml": "[package]\nname=\"test\"\nversion=\"0.1.0\"",
          "src/.gitkeep": ""
        }
      }
    },
    {
      "type": "cli_exec",
      "data": {
        "args": [
          "--local",
          "--help"
        ],
        "cwd": "local_test_project",
        "expect_success": true
      },
      "verify": {
        "execution": {
          "exit_code": 0
        }
      }
    },
    {
      "type": "cli_exec",
      "data": {
        "args": [
          "--validation",
          "disabled",
          "--help"
        ],
        "expect_success": true
      },
      "verify": {
        "execution": {
          "exit_code": 0
        }
      }
    },
    {
      "type": "cli_exec",
      "data": {
        "args": [
          "--validation",
          "enabled",
          "--help"
        ],
        "expect_success": true
      },
      "verify": {
        "execution": {
          "exit_code": 0
        }
      }
    },
    {
      "type": "cli_exec",
      "data": {
        "args": [
          "--validation",
          "invalid",
          "--help"
        ],
        "expect_success": false
      },
      "verify": {
        "execution": {
          "exit_code_nonzero": true,
          "stderr_contains": [
            "invalid value"
          ]
        }
      }
    },
    {
      "type": "setup_project",
      "data": {
        "name": "project_flag_test",
        "files": {
          "Cargo.toml": "[package]\nname=\"proj\"\nversion=\"0.1.0\"",
          "src/.gitkeep": ""
        }
      }
    },
    {
      "type": "cli_exec",
      "data": {
        "args": [
          "--project",
          "{{project_flag_test_path}}",
          "--help"
        ],
        "expect_success": true
      },
      "verify": {
        "execution": {
          "exit_code": 0
        }
      }
    },
    {
      "type": "cli_exec",
      "data": {
        "args": [
          "--local",
          "--validation",
          "disabled",
          "--help"
        ],
        "expect_success": true
      },
      "verify": {
        "execution": {
          "exit_code": 0
        }
      }
    },
    {
      "type": "cli_exec",
      "data": {
        "args": [
          "--project",
          "/nonexistent/path/that/does/not/exist",
          "config"
        ],
        "expect_success": true
      },
      "verify": {
        "execution": {
          "exit_code": 0
        }
      }
    }
  ],
  "final_verify": {
    "execution": {
      "all_flag_combinations_tested": true,
      "error_cases_verified": true
    }
  }
}
