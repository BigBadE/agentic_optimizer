{
  "name": "Vector Cache Immediate Start",
  "description": "Verifies that vector cache initialization starts immediately on app launch",
  "config": {
    "terminal_size": [80, 30],
    "enable_vector_cache": true,
    "mock_embedding_speed": 10
  },
  "initial_state": {
    "workspace_files": [
      {"path": "src/main.rs", "content": "fn main() {}"},
      {"path": "src/lib.rs", "content": "pub fn test() {}"}
    ],
    "vector_cache_state": "empty"
  },
  "steps": [
    {
      "step": 1,
      "action": {
        "type": "wait",
        "data": {"duration_ms": 50}
      },
      "expectations": {
        "background_tasks": {
          "embedding_cache": {
            "status": "running",
            "progress": 0,
            "total": 2
          }
        },
        "tasks": {
          "spawned": [
            {
              "description": "Building embedding index",
              "status": "running",
              "has_progress": true
            }
          ],
          "no_unexpected": false
        },
        "ui_state": {
          "snapshot": "vector_cache_immediate_step1.txt",
          "task_count": 1,
          "has_progress": true
        }
      }
    }
  ]
}
