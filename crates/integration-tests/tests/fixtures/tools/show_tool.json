{
  "name": "Show Tool Operations",
  "description": "Tests file reading with various scenarios: full file, line ranges, nonexistent files",
  "tags": [
    "tools",
    "show",
    "read"
  ],
  "setup": {
    "files": {
      "src/main.rs": "fn main() {\n    println!(\"Hello\");\n}\n",
      "src/lib.rs": "pub fn add(a: i32, b: i32) -> i32 {\n    a + b\n}\n",
      "unicode.txt": "Hello \u4e16\u754c \ud83c\udf0d\nRust \ud83e\udd80 is great!\n"
    },
    "terminal_size": [
      80,
      24
    ]
  },
  "events": [
    {
      "type": "user_input",
      "data": {
        "text": "Show me the main.rs file",
        "submit": true
      }
    },
    {
      "type": "llm_response",
      "verify": {
        "ui": {
          "output_contains": [
            "File contents",
            "fn main()",
            "println"
          ]
        },
        "execution": {}
      },
      "strategy": {
        "type": "once",
        "response": {
          "typescript": [
            "async function agent_code(): Promise<string> {",
            "  const content = await readFile('src/main.rs');",
            "  return `File contents:\\n${content}`;",
            "}"
          ]
        }
      }
    },
    {
      "type": "user_input",
      "data": {
        "text": "Show me lines 1-2 of main.rs",
        "submit": true
      }
    },
    {
      "type": "llm_response",
      "verify": {
        "execution": {}
      },
      "strategy": {
        "type": "once",
        "response": {
          "typescript": [
            "async function agent_code(): Promise<string> {",
            "  const content = await readFile('src/main.rs', { start_line: 1, end_line: 2 });",
            "  return `Lines 1-2:\\n${content}`;",
            "}"
          ]
        }
      }
    },
    {
      "type": "user_input",
      "data": {
        "text": "Read unicode.txt",
        "submit": true
      }
    },
    {
      "type": "llm_response",
      "verify": {
        "execution": {}
      },
      "strategy": {
        "type": "once",
        "response": {
          "typescript": [
            "async function agent_code(): Promise<string> {",
            "  const content = await readFile('unicode.txt');",
            "  return `Unicode content: ${content}`;",
            "}"
          ]
        }
      }
    },
    {
      "type": "user_input",
      "data": {
        "text": "Try to read nonexistent.rs",
        "submit": true
      }
    },
    {
      "type": "llm_response",
      "verify": {
        "execution": {}
      },
      "strategy": {
        "type": "once",
        "response": {
          "typescript": [
            "async function agent_code(): Promise<string> {",
            "  try {",
            "    const content = await readFile('nonexistent.rs');",
            "    return `Content: ${content}`;",
            "  } catch (error) {",
            "    return `Error: File not found`;",
            "  }",
            "}"
          ]
        }
      }
    }
  ],
  "final_verify": {
    "execution": {},
    "files": [
      {
        "path": "src/main.rs",
        "exists": true
      },
      {
        "path": "unicode.txt",
        "exists": true
      }
    ]
  }
}